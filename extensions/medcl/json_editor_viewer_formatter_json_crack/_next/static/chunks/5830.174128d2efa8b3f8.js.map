{"version":3,"file":"static/chunks/5830.174128d2efa8b3f8.js","mappings":"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","sources":["webpack://_N_E/./src/features/editor/TextEditor.tsx"],"sourcesContent":["import React, { useCallback } from \"react\";\nimport { LoadingOverlay } from \"@mantine/core\";\nimport styled from \"styled-components\";\nimport Editor, { type EditorProps, loader, type OnMount, useMonaco } from \"@monaco-editor/react\";\nimport useConfig from \"../../store/useConfig\";\nimport useFile from \"../../store/useFile\";\n\nloader.config({\n  paths: {\n    vs: \"https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.52.2/min/vs\",\n  },\n});\n\nconst editorOptions: EditorProps[\"options\"] = {\n  formatOnPaste: true,\n  tabSize: 2,\n  formatOnType: true,\n  minimap: { enabled: false },\n  stickyScroll: { enabled: false },\n  scrollBeyondLastLine: false,\n  placeholder: \"Start typing...\",\n};\n\nconst TextEditor = () => {\n  const monaco = useMonaco();\n  const contents = useFile(state => state.contents);\n  const setContents = useFile(state => state.setContents);\n  const setError = useFile(state => state.setError);\n  const jsonSchema = useFile(state => state.jsonSchema);\n  const getHasChanges = useFile(state => state.getHasChanges);\n  const theme = useConfig(state => (state.darkmodeEnabled ? \"vs-dark\" : \"light\"));\n  const fileType = useFile(state => state.format);\n\n  React.useEffect(() => {\n    monaco?.languages.json.jsonDefaults.setDiagnosticsOptions({\n      validate: true,\n      allowComments: true,\n      enableSchemaRequest: true,\n      ...(jsonSchema && {\n        schemas: [\n          {\n            uri: \"http://myserver/foo-schema.json\",\n            fileMatch: [\"*\"],\n            schema: jsonSchema,\n          },\n        ],\n      }),\n    });\n  }, [jsonSchema, monaco?.languages.json.jsonDefaults]);\n\n  React.useEffect(() => {\n    const beforeunload = (e: BeforeUnloadEvent) => {\n      if (getHasChanges()) {\n        const confirmationMessage =\n          \"Unsaved changes, if you leave before saving  your changes will be lost\";\n\n        (e || window.event).returnValue = confirmationMessage; //Gecko + IE\n        return confirmationMessage;\n      }\n    };\n\n    window.addEventListener(\"beforeunload\", beforeunload);\n\n    return () => {\n      window.removeEventListener(\"beforeunload\", beforeunload);\n    };\n  }, [getHasChanges]);\n\n  const handleMount: OnMount = useCallback(editor => {\n    editor.onDidPaste(() => {\n      editor.getAction(\"editor.action.formatDocument\")?.run();\n    });\n  }, []);\n\n  return (\n    <StyledEditorWrapper>\n      <StyledWrapper>\n        <Editor\n          className=\"sentry-mask\"\n          data-sentry-mask=\"true\"\n          height=\"100%\"\n          language={fileType}\n          theme={theme}\n          value={contents}\n          options={editorOptions}\n          onMount={handleMount}\n          onValidate={errors => setError(errors[0]?.message || \"\")}\n          onChange={contents => setContents({ contents, skipUpdate: true })}\n          loading={<LoadingOverlay visible />}\n        />\n      </StyledWrapper>\n    </StyledEditorWrapper>\n  );\n};\n\nexport default TextEditor;\n\nconst StyledEditorWrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  user-select: none;\n`;\n\nconst StyledWrapper = styled.div`\n  display: grid;\n  height: 100%;\n  grid-template-columns: 100%;\n  grid-template-rows: minmax(0, 1fr);\n`;\n"],"names":["loader","config","paths","vs","editorOptions","formatOnPaste","tabSize","formatOnType","minimap","enabled","stickyScroll","scrollBeyondLastLine","placeholder","__webpack_exports__","monaco","useMonaco","contents","useFile","state","setContents","setError","jsonSchema","getHasChanges","theme","useConfig","darkmodeEnabled","fileType","format","React","languages","json","jsonDefaults","setDiagnosticsOptions","validate","allowComments","enableSchemaRequest","schemas","uri","fileMatch","schema","beforeunload","confirmationMessage","e","window","event","returnValue","addEventListener","removeEventListener","handleMount","useCallback","editor","onDidPaste","getAction","run","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__","jsx","StyledEditorWrapper","StyledWrapper","Editor","className","data-sentry-mask","height","language","value","options","onMount","onValidate","errors","message","onChange","skipUpdate","loading","LoadingOverlay","visible","styled","div","withConfig"],"sourceRoot":""}