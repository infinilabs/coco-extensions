(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7110],{11947:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/widget",function(){return n(97637)}])},10375:function(e,t,n){"use strict";n.d(t,{F:function(){return r},h:function(){return a}});let r={ROW_HEIGHT:30,PARENT_HEIGHT:36},a=800},47542:function(e,t,n){"use strict";var r,a,l,i;n.d(t,{bd:function(){return o},dO:function(){return r},mS:function(){return s},u4:function(){return a}}),(l=r||(r={})).JSON="json",l.YAML="yaml",l.XML="xml",l.TOML="toml",l.CSV="csv";let o=[{value:"json",label:"JSON"},{value:"yaml",label:"YAML"},{value:"xml",label:"XML"},{value:"csv",label:"CSV"}];(i=a||(a={})).TypeScript="typescript",i.TypeScript_Combined="typescript/typealias",i.Go="go",i.JSON_SCHEMA="json_schema",i.Kotlin="kotlin",i.Rust="rust";let s=[{label:"TypeScript",value:"typescript",lang:"typescript"},{label:"TypeScript (merged)",value:"typescript/typealias",lang:"typescript"},{label:"Go",value:"go",lang:"go"},{label:"JSON Schema",value:"json_schema",lang:"json"},{label:"Kotlin",value:"kotlin",lang:"kotlin"},{label:"Rust",value:"rust",lang:"rust"}]},77677:function(e,t,n){"use strict";n.d(t,{C:function(){return l},S:function(){return u}});var r=n(10375),a=n(16921);let l=e=>{if("string"!=typeof e)return!1;let t=/(https?:\/\/.*\.(?:png|jpg|gif|svg))/i.test(e),n=e.startsWith("data:image/")&&e.includes("base64");return t||n},i=e=>Array.isArray(e)?e.map(e=>{let[t,n]=e;return"".concat(t,": ").concat(JSON.stringify(n).slice(0,80))}).join("\n"):"".concat(e),o=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return{width:45,height:45};let n=document.createElement("div");n.style.whiteSpace=t?"nowrap":"pre-wrap",n.innerText=e,n.style.fontSize="12px",n.style.width="fit-content",n.style.padding="0 10px",n.style.fontWeight="500",n.style.fontFamily="monospace",document.body.appendChild(n);let a=n.getBoundingClientRect(),l=e.split("\n").length,i=a.width+4,o=t?r.F.PARENT_HEIGHT:l*r.F.ROW_HEIGHT;return document.body.removeChild(n),{width:i,height:o}},s=new Map;setInterval(()=>s.clear(),12e4);let u=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],{imagePreviewEnabled:n}=a.Z.getState(),r=l(e)&&n,u=[e,t].toString();if(s.has(u)){let e=s.get(u);if(e)return e}let c=o(i(e),"string"==typeof e);return r&&(c.width=80,c.height=80),t&&(c.width+=80),c.width>700&&(c.width=700),s.set(u,c),c}},80980:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(5508),a=n(10375),l=n(44194),i=n(25003),o=n(77677);let s=e=>{let t=(0,i.jv)(e);if(!t)return{nodes:[],edges:[]};let n=[],r=[],a=1,l=1;return!function e(t,s){var u,c,d,p,h,v,g,f,m,y;let w=String(a++),S=[];void 0!==s&&(null===(u=t.parent)||void 0===u?void 0:u.type)==="array"&&r.push({id:String(l++),from:s,to:w,text:""});let b="array"===t.type,O=!t.parent||"array"===t.parent.type;if(b&&O){let{width:r,height:a}=(0,o.S)("[".concat(null!==(m=null===(h=t.children)||void 0===h?void 0:h.length)&&void 0!==m?m:"0"," items]"));return n.push({id:w,text:[{key:null,value:"[".concat(null!==(y=null===(v=t.children)||void 0===v?void 0:v.length)&&void 0!==y?y:0," items]"),type:"array",childrenCount:null===(g=t.children)||void 0===g?void 0:g.length}],width:r,height:a,path:[]}),null===(f=t.children)||void 0===f||f.forEach(t=>{e(t,w)}),w}null===(c=t.children)||void 0===c||c.forEach(t=>{var n,a,i,o;if(!t.children||!t.children[1])return e(t,w);let s=null!==(n=t.children[0].value)&&void 0!==n?n:null,u=t.children[1],c=u.type;if("array"===c){let t=[];null===(a=u.children)||void 0===a||a.forEach(n=>{let r=e(n,void 0);r&&t.push(r)}),S.push({key:s,value:u.value,type:c,to:t.length>0?t:void 0,childrenCount:null===(i=u.children)||void 0===i?void 0:i.length}),t.forEach(e=>{r.push({id:String(l++),from:w,to:e,text:null!=s?s:null})})}else if("object"===c){let t=e(u,w);S.push({key:s,value:u.value,type:c,childrenCount:Object.keys(null!==(o=u.children)&&void 0!==o?o:{}).length,...t&&{to:[t]}}),t&&r.push({id:String(l++),from:w,to:t,text:null!=s?s:null})}else S.push({key:s,value:u.value,type:c})}),(null===(d=t.parent)||void 0===d?void 0:d.type)==="array"&&"object"===t.type&&(null===(p=t.children)||void 0===p?void 0:p.length)===0&&S.push({key:null,value:"{0 keys}",type:"object",childrenCount:0});let C=()=>{let e=e=>{var t;let n=(0,i.F6)(e);return null==n?void 0:null===(t=n.pop())||void 0===t?void 0:t.toString()};return t.parent?"array"===t.parent.type?{parentKey:e(t.parent),parentType:"array"}:"property"===t.parent.type?{parentKey:e(t),parentType:"object"}:{parentKey:e(t),parentType:t.parent.type.replace("property","object")}:{parentKey:e(t),parentType:t.type}};if(0===S.length){if(void 0===t.value)return;let{width:e,height:r}=(0,o.S)(t.value);n.push({id:w,text:[{key:null,value:t.value,type:t.type}],width:e,height:r,path:(0,i.F6)(t),...C()})}else{let e="";e=S.some(e=>null!==e.key)?S.map(e=>{var t,n;let r=null===e.key?"":e.key;return"object"===e.type?[r,"{".concat(null!==(t=e.childrenCount)&&void 0!==t?t:0," keys}")]:"array"===e.type?[r,"[".concat(null!==(n=e.childrenCount)&&void 0!==n?n:0," items]")]:null===e.value?[r,"null"]:[r,"".concat(e.value)]}):"".concat(S[0].value);let{width:r,height:a}=(0,o.S)(e);n.push({id:w,text:S,width:r,height:a,path:(0,i.F6)(t),...C()})}return w}(t),{nodes:n,edges:r}},u={viewPort:null,direction:"RIGHT",loading:!0,fullscreen:!1,nodes:[],edges:[],selectedNode:null,path:"",aboveSupportedLimit:!1};var c=(0,r.Ue)((e,t)=>({...u,clearGraph:()=>e({nodes:[],edges:[],loading:!1}),setSelectedNode:t=>e({selectedNode:t}),setGraph:(t,n)=>{let{nodes:r,edges:i}=s(null!=t?t:l.Z.getState().json);if(r.length>a.h)return e({aboveSupportedLimit:!0,...n,loading:!1});e({nodes:r,edges:i,aboveSupportedLimit:!1,...n})},setDirection:function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"RIGHT";e({direction:n}),setTimeout(()=>t().centerView(),200)},setLoading:t=>e({loading:t}),focusFirstNode:()=>{var e,n;let r=document.querySelector("g[id$='node-1']");null===(n=t().viewPort)||void 0===n||null===(e=n.camera)||void 0===e||e.centerFitElementIntoView(r,{elementExtraMarginForZoom:100})},setZoomFactor:e=>{var n;let r=t().viewPort;null==r||null===(n=r.camera)||void 0===n||n.recenter(r.centerX,r.centerY,e)},zoomIn:()=>{var e;let n=t().viewPort;null==n||null===(e=n.camera)||void 0===e||e.recenter(n.centerX,n.centerY,n.zoomFactor+.1)},zoomOut:()=>{var e;let n=t().viewPort;null==n||null===(e=n.camera)||void 0===e||e.recenter(n.centerX,n.centerY,n.zoomFactor-.1)},centerView:()=>{let e=t().viewPort;null==e||e.updateContainerSize();let n=document.querySelector(".jsoncrack-canvas");if(n){var r;null==e||null===(r=e.camera)||void 0===r||r.centerFitElementIntoView(n)}},toggleFullscreen:t=>e({fullscreen:t}),setViewPort:t=>e({viewPort:t})}))},86676:function(e,t,n){"use strict";n.d(t,{L:function(){return a},j:function(){return l}});var r=n(47542);let a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.dO.JSON;return new Promise(async(a,l)=>{try{if(!e)return a({});if(t===r.dO.JSON){let{parse:t}=await n.e(5003).then(n.bind(n,25003)),r=[],l=t(e,r);return r.length>0&&JSON.parse(e),a(l)}if(t===r.dO.YAML){let{load:t}=await n.e(487).then(n.bind(n,80487));return a(t(e))}if(t===r.dO.XML){let{XMLParser:t}=await n.e(352).then(n.bind(n,352)),r=new t({attributeNamePrefix:"$",ignoreAttributes:!1,allowBooleanAttributes:!0,parseAttributeValue:!0,trimValues:!0,parseTagValue:!0});return a(r.parse(e))}if(t===r.dO.CSV){let{csv2json:t}=await n.e(1718).then(n.bind(n,81718)),r=t(e,{trimFieldValues:!0,trimHeaderFields:!0,wrapBooleans:!0,excelBOM:!0});return a(r)}return a({})}catch(e){return l(e instanceof Error?e.message:"Failed to parse content")}})},l=async(e,t)=>new Promise(async a=>{try{if(!e)return a("");if(t===r.dO.JSON){let t=JSON.parse(e);return a(JSON.stringify(t,null,2))}if(t===r.dO.YAML){let{dump:t}=await n.e(487).then(n.bind(n,80487)),{parse:r}=await n.e(5003).then(n.bind(n,25003));return a(t(r(e)))}if(t===r.dO.XML){let{XMLBuilder:t}=await n.e(352).then(n.bind(n,352)),r=new t({format:!0,attributeNamePrefix:"$",ignoreAttributes:!1});return a(r.build(JSON.parse(e)))}if(t===r.dO.CSV){let{json2csv:t}=await n.e(1718).then(n.bind(n,81718)),r=JSON.parse(e),l=Array.isArray(r)?r:[r];return a(t(l,{expandArrayObjects:!0,expandNestedObjects:!0,excelBOM:!0,wrapBooleans:!0,trimFieldValues:!0,trimHeaderFields:!0}))}return a(e)}catch(t){return console.error(e,t),a(e)}})},97637:function(e,t,n){"use strict";n.r(t);var r=n(52676),a=n(75271),l=n(65998),i=n.n(l),o=n(33561),s=n(8267),u=n(69804),c=n(46035),d=n(25135),p=n(67573),h=n(80980),v=n(78821);let g=i()(()=>Promise.all([n.e(6951),n.e(8314),n.e(5760),n.e(2075),n.e(5714),n.e(1951),n.e(9357),n.e(7141),n.e(9480),n.e(1236),n.e(3252),n.e(5077),n.e(9286),n.e(9490)]).then(n.bind(n,40424)),{loadableGenerated:{webpack:()=>[40424]},ssr:!1}),f=i()(()=>Promise.all([n.e(6951),n.e(8314),n.e(2678),n.e(5760),n.e(2075),n.e(5714),n.e(1951),n.e(9929),n.e(2544),n.e(8360),n.e(9630),n.e(9357),n.e(7141),n.e(9480),n.e(1236),n.e(3252),n.e(5077),n.e(4777),n.e(9286),n.e(6187)]).then(n.bind(n,6187)).then(e=>e.GraphView),{loadableGenerated:{webpack:()=>[6187]},ssr:!1});t.default=()=>{let{query:e,push:t,isReady:n}=(0,o.useRouter)(),{setColorScheme:l}=(0,s.X)(),[i,m]=a.useState("dark"),y=(0,v.Z)(e=>e.checkEditorSession),w=(0,v.Z)(e=>e.setContents),S=(0,h.Z)(e=>e.setDirection),b=(0,h.Z)(e=>e.clearGraph);return a.useEffect(()=>{if(n){var t;"string"==typeof(null==e?void 0:e.json)?y(e.json,!0):b(),window.parent.postMessage(null===(t=window.frameElement)||void 0===t?void 0:t.getAttribute("id"),"*")}},[b,y,n,t,e.json,e.partner]),a.useEffect(()=>{let e=e=>{try{var t,n,r,a,l,i;if(!(null===(t=e.data)||void 0===t?void 0:t.json))return;((null===(r=e.data)||void 0===r?void 0:null===(n=r.options)||void 0===n?void 0:n.theme)==="light"||(null===(l=e.data)||void 0===l?void 0:null===(a=l.options)||void 0===a?void 0:a.theme)==="dark")&&m(e.data.options.theme),w({contents:e.data.json,hasChanges:!1}),S((null===(i=e.data.options)||void 0===i?void 0:i.direction)||"RIGHT")}catch(e){console.error(e),d.ZP.error("Invalid JSON!")}};return window.addEventListener("message",e),()=>window.removeEventListener("message",e)},[l,w,S,i]),a.useEffect(()=>{l(i)},[l,i]),(0,r.jsxs)(u.f6,{theme:"dark"===i?p.$_:p.Wb,children:[(0,r.jsx)(c.PB,{noindex:!0,nofollow:!0}),(0,r.jsx)(g,{}),(0,r.jsx)(f,{isWidget:!0})]})}},16921:function(e,t,n){"use strict";var r=n(5508),a=n(42816),l=n(80980);let i={darkmodeEnabled:!0,imagePreviewEnabled:!0,liveTransformEnabled:!0,gesturesEnabled:!1,rulersEnabled:!0},o=(0,r.Ue)((0,a.tJ)(e=>({...i,toggleRulers:t=>e({rulersEnabled:t}),toggleGestures:t=>e({gesturesEnabled:t}),toggleLiveTransform:t=>e({liveTransformEnabled:t}),toggleDarkMode:t=>e({darkmodeEnabled:t}),toggleImagePreview:t=>{e({imagePreviewEnabled:t}),l.Z.getState().setGraph()}}),{name:"config"}));t.Z=o},78821:function(e,t,n){"use strict";n.d(t,{Z:function(){return y}});var r=n(86763),a=n.n(r),l=n(43957),i=n(25135),o=n(5508),s=JSON.parse('{"fruits":[{"name":"Apple","color":"#FF0000","details":{"type":"Pome","season":"Fall"},"nutrients":{"calories":52,"fiber":"2.4g","vitaminC":"4.6mg"}},{"name":"Banana","color":"#FFFF00","details":{"type":"Berry","season":"Year-round"},"nutrients":{"calories":89,"fiber":"2.6g","potassium":"358mg"}},{"name":"Orange","color":"#FFA500","details":{"type":"Citrus","season":"Winter"},"nutrients":{"calories":47,"fiber":"2.4g","vitaminC":"53.2mg"}}]}'),u=n(47542),c=n(80980),d=n(86676),p=n(16921),h=n(44194);let v=JSON.stringify(s,null,2),g={fileData:null,format:u.dO.JSON,contents:v,error:null,hasChanges:!1,jsonSchema:null},f=e=>/(https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|www\.[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9]+\.[^\s]{2,}|www\.[a-zA-Z0-9]+\.[^\s]{2,})/gi.test(e),m=a()(e=>{c.Z.getState().setLoading(!0),h.Z.getState().setJson(JSON.stringify(e,null,2))},400);var y=(0,o.Ue)()((e,t)=>({...g,clear:()=>{e({contents:""}),h.Z.getState().clear()},setJsonSchema:t=>e({jsonSchema:t}),setFile:n=>{e({fileData:n,format:n.format||u.dO.JSON}),t().setContents({contents:n.content,hasChanges:!1}),(0,l.B)("set_content",{label:n.format})},getContents:()=>t().contents,getFormat:()=>t().format,getHasChanges:()=>t().hasChanges,setFormat:async n=>{try{let r=t().format;e({format:n});let a=await (0,d.L)(t().contents,r),l=await (0,d.j)(JSON.stringify(a,null,2),n);t().setContents({contents:l})}catch(e){t().clear(),console.warn("The content was unable to be converted, so it was cleared instead.")}},setContents:async n=>{let{contents:r,hasChanges:a=!0,skipUpdate:l=!1,format:i}=n;try{e({...r&&{contents:r},error:null,hasChanges:a,format:null!=i?i:t().format});let n=window.location.href.includes("?"),o=await (0,d.L)(t().contents,t().format);if(!p.Z.getState().liveTransformEnabled&&l)return;t().hasChanges&&r&&r.length<8e4&&!function(){try{return window.self!==window.top}catch(e){return!0}}()&&!n&&(sessionStorage.setItem("content",r),sessionStorage.setItem("format",t().format),e({hasChanges:!0})),m(o)}catch(t){var o;if(null==t?void 0:null===(o=t.mark)||void 0===o?void 0:o.snippet)return e({error:t.mark.snippet});(null==t?void 0:t.message)&&e({error:t.message}),h.Z.setState({loading:!1}),c.Z.setState({loading:!1})}},setError:t=>e({error:t}),setHasChanges:t=>e({hasChanges:t}),fetchUrl:async e=>{try{let n=await fetch(e),r=await n.json(),a=JSON.stringify(r,null,2);return t().setContents({contents:a}),h.Z.setState({json:a,loading:!1})}catch(e){t().clear(),i.Am.error("Failed to fetch document from URL!")}},checkEditorSession:(n,r)=>{if(n&&"string"==typeof n&&f(n))return t().fetchUrl(n);let a=v,l=sessionStorage.getItem("content"),i=sessionStorage.getItem("format");l&&!r&&(a=l),i&&e({format:i}),t().setContents({contents:a,hasChanges:!1})}}))},44194:function(e,t,n){"use strict";var r=n(5508),a=n(80980);let l={json:"{}",loading:!0},i=(0,r.Ue)()((e,t)=>({...l,getJson:()=>t().json,setJson:t=>{e({json:t,loading:!1}),a.Z.getState().setGraph(t)},clear:()=>{e({json:"",loading:!1}),a.Z.getState().clearGraph()}}));t.Z=i}},function(e){e.O(0,[5003,1302,2888,9774,179],function(){return e(e.s=11947)}),_N_E=e.O()}]);
//# sourceMappingURL=widget-7576f8b8925f05a5.js.map